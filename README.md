# Socket Benchmark Test

This project is designed to benchmark Socket.IO and WebSocket (WS) implementations using Express and uWebSockets.js. It facilitates performance testing and comparison between different WebSocket engines and server frameworks.

## Installation

To install the project dependencies, run:

```bash
npm install
```

## Environment Configuration

This project manages environment variables uniquely. Configuration updates should be made in the `env/` directory files.

**Note:** If a `.env` file exists in the root directory, it is automatically included and merged into the final configuration for all environments.

To generate the environment configuration, use the following commands:

```bash
# Generates local environment configuration
npm run envgenerate

# Generates production environment configuration (intended for Docker/Production use)
npm run envgenerate:prod
```

These scripts internally utilize `env/env.merger.sh` to merge various configuration files into a final `.env.app` file.

## Running the Server

You can run the benchmark server with different configurations:

*   **Express with Socket.IO:**
    ```bash
    npm run expressio
    ```
*   **uWebSockets with Socket.IO:**
    ```bash
    npm run uwebsocketio
    ```
*   **Express with WS:**
    ```bash
    npm run expressws
    ```
*   **uWebSockets with WS:**
    ```bash
    npm run uwebsocketws
    ```

## Running the Client

To start client instances for benchmarking, use the provided `tmux-start.sh` script. This script starts the clients in a detached tmux session.

```bash
# Don't forget to install tmux if you haven't already
# Starts client instances in a detached tmux session
# Usage: ./tmux-start.sh [number_of_instances]
./tmux-start.sh 5
```

Alternatively, for a single run without tmux:

```bash
npm run client [number_of_instances]
```

## Analysis

To analyze the benchmark results:

```bash
npm run analyze
```

## Log Directories

The project automatically creates and uses the following directories for logging:

*   `clientlogs/`: Stores logs generated by client instances.
*   `serverlogs/`: Stores logs generated by the server.
*   `result/`: Stores the final benchmark result files.

